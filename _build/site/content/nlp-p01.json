{"version":2,"kind":"Notebook","sha256":"ee887c0ee7b9dcb41b001713a5fa8da98ef89e0511bd0de30e0a5f0e74a99455","slug":"nlp-p01","location":"/nlp-P01.ipynb","dependencies":[],"frontmatter":{"title":"Project 2: Reproducibility in Natural Language Processing","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/UCB-stat-159-f25/proj02-group22","source_url":"https://github.com/UCB-stat-159-f25/proj02-group22/blob/main/nlp-P01.ipynb","edit_url":"https://github.com/UCB-stat-159-f25/proj02-group22/edit/main/nlp-P01.ipynb","exports":[{"format":"ipynb","filename":"nlp-P01.ipynb","url":"/nlp-P01-1a7aab7739386fcfb1a4d10beff2c551.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Part 1: Data Loading and Initial Exploration (15 pts)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bDMBmbhGU9"}],"identifier":"part-1-data-loading-and-initial-exploration-15-pts","label":"Part 1: Data Loading and Initial Exploration (15 pts)","html_id":"part-1-data-loading-and-initial-exploration-15-pts","implicit":true,"key":"VTIBEOi0Me"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The state of union speech data for this project is stored in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BTldtkhFVt"},{"type":"inlineCode","value":"data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Rk2zxw6zos"},{"type":"text","value":" folder in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"G7DGFhc8e5"},{"type":"inlineCode","value":"SOTU.csv","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"C1RzV2i6LC"},{"type":"text","value":" file. The data file is structured as a CSV with columns for president name, speech text, year, and word count in the speech.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Siz97cXCcO"}],"key":"I9iQ8MwbT9"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We create the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"evAi48lFxy"},{"type":"inlineCode","value":"conda","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KzpzbTOXB8"},{"type":"text","value":" environment with the provided environment.yaml file.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PdqcPUJwW4"}],"key":"CDGt3uynmm"}],"key":"JxBfAMuCbl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"laHWr2xD2r"}],"identifier":"read-data","label":"Read Data","html_id":"read-data","implicit":true,"key":"VbMza5s2Ts"}],"key":"sB0zqzyim1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# imports\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nplt.style.use('seaborn-v0_8-dark') ","key":"uasrEf2Kl8"},{"type":"output","id":"l2LHWmXgGfOOSwVStNfW6","data":[],"key":"EJpvLggSCa"}],"key":"k68BxLpXBC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# read in SOTU.csv \nsou = pd.read_csv('data/SOTU.csv')\nsou.head()","key":"d68VUfkOYe"},{"type":"output","id":"7P2huio1sPQtvBcac95Dp","data":[{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>President</th>\n      <th>Year</th>\n      <th>Text</th>\n      <th>Word Count</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Joseph R. Biden</td>\n      <td>2024.0</td>\n      <td>\\n[Before speaking, the President presented hi...</td>\n      <td>8003</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Joseph R. Biden</td>\n      <td>2023.0</td>\n      <td>\\nThe President. Mr. Speaker——\\n[At this point...</td>\n      <td>8978</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Joseph R. Biden</td>\n      <td>2022.0</td>\n      <td>\\nThe President. Thank you all very, very much...</td>\n      <td>7539</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Joseph R. Biden</td>\n      <td>2021.0</td>\n      <td>\\nThe President. Thank you. Thank you. Thank y...</td>\n      <td>7734</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Donald J. Trump</td>\n      <td>2020.0</td>\n      <td>\\nThe President. Thank you very much. Thank yo...</td>\n      <td>6169</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"         President    Year                                               Text  \\\n0  Joseph R. Biden  2024.0  \\n[Before speaking, the President presented hi...   \n1  Joseph R. Biden  2023.0  \\nThe President. Mr. Speaker——\\n[At this point...   \n2  Joseph R. Biden  2022.0  \\nThe President. Thank you all very, very much...   \n3  Joseph R. Biden  2021.0  \\nThe President. Thank you. Thank you. Thank y...   \n4  Donald J. Trump  2020.0  \\nThe President. Thank you very much. Thank yo...   \n\n   Word Count  \n0        8003  \n1        8978  \n2        7539  \n3        7734  \n4        6169  ","content_type":"text/plain"}}}],"key":"H3AQYj4Ehf"}],"key":"bajMEh4ye9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Exploratory Data Analysis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OHajlJGhsg"}],"identifier":"exploratory-data-analysis","label":"Exploratory Data Analysis","html_id":"exploratory-data-analysis","implicit":true,"key":"RfH6iNaO8f"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We start with EDA to summarize the dataset and determine if any patterns or relationships exists between the variables. The mention of speeches refers to the State of the Union speeches. The five plots we create are:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"OnpepPzsjn"}],"key":"xi8WNqpaaK"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Number of Speeches per President","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YRcu7d0Rz0"}],"key":"S5xvPLeAhd"}],"key":"hlMcvwiqAR"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Number of Speeches per Year","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"y4FilRAnZv"}],"key":"vEL300WkL2"}],"key":"ukvbZNx9em"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Distribution of Word Count","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mltdlX4cEK"}],"key":"VX1HiyT9nF"}],"key":"zT22UlGS9c"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Distribution of Word Count over the years","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"S8kYrrnurI"}],"key":"JIOZaX1vCX"}],"key":"XwDGXeLWVv"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Distribution of Word Count per President","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"EhzX5P4XHN"}],"key":"GLtoiTTULz"}],"key":"yxI8pOllxK"}],"key":"VWWfnHN91O"}],"key":"pv2SQUmErf"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Number of Speeches per President","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ufmYz0C67k"}],"identifier":"number-of-speeches-per-president","label":"Number of Speeches per President","html_id":"number-of-speeches-per-president","implicit":true,"key":"zR9OT4u1lu"}],"key":"sVSmLFhfue"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# find number of speeches per president \nspeech_pres = sou['President'].value_counts().reindex(sou[\"President\"].unique())\n\n#bar plot \nfig, ax = plt.subplots(figsize=(12, 5))\nspeech_pres.plot(kind = 'bar')\nplt.title('Number of Speeches Per President')\nplt.xlabel('President')\nplt.ylabel('Count');\nplt.savefig('outputs/num_speeches_per_pres.png', dpi=300, bbox_inches='tight')","key":"xnU3IjmduQ"},{"type":"output","id":"gwQxV-Kw1ugzvjqt6Qig2","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57c9ac4c963ab00863d2529bbcff1cc3","path":"/57c9ac4c963ab00863d2529bbcff1cc3.png"},"text/plain":{"content":"<Figure size 1200x500 with 1 Axes>","content_type":"text/plain"}}}],"key":"Kvr9dZEKsS"}],"key":"ukB01PEZLI"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We created a bar plot for the number of speeches given by each president from 1970-2024. There are 43 presidents in the data set, so not all presidents who served during 1970-2024 are included. The number of speeches range from 1 to 12, with the majority of presidents giving 4 speeches and a few giving more than 8 speeches. State of the Union speeches are given annually, so we expect that most presidents would give 4 or 8 speeches (4 speeches per term). George Washington gave the most speeches (12 speeches) and Zachary Taylor gave the least (1 speech). George Washington served as president for 8 years, so it is suprising that he gave more than 8 speeches. On the other hand, Zachary Taylor was only president for a year so it makes sense that he only give one speech. The president who had the longest presidential term was Franklin D. Roosevelt, who served for 11 years and has the second-highest speech count (11 speeches).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wfJHEWPor8"}],"key":"gp8MHIV08K"}],"key":"ENz3Jotxq3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Number of Speeches per Year","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FQ87YmIjWu"}],"identifier":"number-of-speeches-per-year","label":"Number of Speeches per Year","html_id":"number-of-speeches-per-year","implicit":true,"key":"oCVtF8DMw3"}],"key":"XAinFTKv7P"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# speeches per year\nspeech_year = sou['Year'].value_counts().sort_index()\n\n#line plot\nspeech_year.plot()\nplt.title('Number of State of Union Speeches Per Year')\nplt.xlabel('Year')\nplt.ylabel('Count');\nplt.savefig('outputs/num_speeches_per_year.png', dpi=300, bbox_inches='tight')","key":"xYH4A25Sr2"},{"type":"output","id":"3ZhfI1obbYqAInAFnOmqn","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"7d2ed9858af702fdd8ad2b18cee3492b","path":"/7d2ed9858af702fdd8ad2b18cee3492b.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"gxXjjdt5e7"}],"key":"bIm0rk2NLo"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We created a lineplot of number of speeches per year. The years in the dataset range from 1790 to 2024 and the count of speeches per year ranges from 1 to 4. The majority of the years had 1 speech, which was expected since State of the Union speeches are given annually. The greatest number of speeches was 4 in 1790, which was during George Washginton’s term. This accounts for why Washington had 12 speeches despite only serving two terms. A few years have 2 speeches, which could correspond to presidents that had more than 8 speeches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dbIQnLi2Z5"}],"key":"kO198zfE20"}],"key":"j0kSuLi1QL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Word Count Distribution","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kCuv6scAtd"}],"identifier":"word-count-distribution","label":"Word Count Distribution","html_id":"word-count-distribution","implicit":true,"key":"Jjc4NTfiWm"}],"key":"ECuQQzz44z"},{"type":"block","kind":"notebook-code","data":{"scrolled":true},"children":[{"type":"code","lang":"python","executable":true,"value":"#histogram of word count\nsns.histplot(sou['Word Count'], bins = 18)\nplt.title('Distribution of State of the Union Speech Word Counts');\nplt.savefig('outputs/speech_word_count.png', dpi=300, bbox_inches='tight')","key":"GVsz1Fn2mR"},{"type":"output","id":"K-G-wUpfzGtzZRbqZMSgW","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ad6bf96136e8ec8a257ba88290631e04","path":"/ad6bf96136e8ec8a257ba88290631e04.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"WY1qd1I98U"}],"key":"TJwOHvmioB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We created a histogram of the distribution of word counts in speeches. The distribution is right skewed, with few speeches (less than 10 speeches) having more than 15,000 words. The majority of speeches have around 3,400 to 6,700 words. The plot shows that there is a gap on the right end that is followed by one speech with more than 30,000 words, which can be an outlier.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S1rRMh76eV"}],"key":"iuHrSu8Np3"}],"key":"IwViZnLCIP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Word Count Distribution over Year","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iYWqniXX5k"}],"identifier":"word-count-distribution-over-year","label":"Word Count Distribution over Year","html_id":"word-count-distribution-over-year","implicit":true,"key":"N7B7FP6hWb"}],"key":"IaApWD37ke"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# rugplot of word count distribution per year\nsns.scatterplot(x = sou['Word Count'], y = sou['Year'])\nsns.rugplot(x = sou['Word Count'], y = sou['Year'])\nplt.title('Speech Year Versus Word Count');\nplt.savefig('outputs/year_vs_word_count.png', dpi=300, bbox_inches='tight')","key":"o838Fuomt8"},{"type":"output","id":"4r7fEFbZkArI0Fp28iNvk","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1ea0f391d06dfe296b8c4877e2b2ddd2","path":"/1ea0f391d06dfe296b8c4877e2b2ddd2.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"key":"KSvd8ypFN0"}],"key":"DtKg3poSji"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We created a rugplot for the distribution of word count and year. The plot also shows a scatterplot of word count per year (note that the y-axis is Year and x-axis is word count). The rugplot for word counts shows thicker bars for lower word counts, which represents a higher density, indicating a right skew like in the previous histogram of word count distribution. The scatterplot also shows some overplotting for points in the range of these lower word counts, indicating that most years had speeches with a word count less than 15,000. There are a couple points with a word count greater than 15,000.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BE5cp7VPmk"}],"key":"yaZcmFXbgG"}],"key":"J4J8YiI0MS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Word Count Distribution per President","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JnJeDkAhS8"}],"identifier":"word-count-distribution-per-president","label":"Word Count Distribution per President","html_id":"word-count-distribution-per-president","implicit":true,"key":"xCyIwQcQfG"}],"key":"GAhel633HC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# mean word count per president\nword_count_pres = sou.groupby('President')['Word Count'].mean().reindex(sou[\"President\"].unique())\n\n#bar plot\nfig, ax = plt.subplots(figsize=(12, 5))\nword_count_pres.plot(kind = 'bar')\nplt.title('Average State of the Union Word Count per President')\nplt.ylabel('Average Word Count');\nplt.savefig('outputs/word_count_per_pres.png', dpi=300, bbox_inches='tight')","key":"GzbwktTBrS"},{"type":"output","id":"x2vEM0DlV_v0GIxjaaF9q","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"64d22f3d0b8e4668f0fc96201d106f21","path":"/64d22f3d0b8e4668f0fc96201d106f21.png"},"text/plain":{"content":"<Figure size 1200x500 with 1 Axes>","content_type":"text/plain"}}}],"key":"GmrKkmAql9"}],"key":"uTKUtk8lWe"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We found the average word count per president and created a bar plot. Each bar represents the average number of words in a State of the Union speech given by the president. The majority of presidents had less than 10,000 average words. William Howard Taft had the greatest average word count at more than 20,000 words, while John Adams had the lowest average word count. Notice that although George Washington gave the most speeches, he had one of the lowest average word counts in his speeches. The average word count was lowest for the first few presidents, which are located at the right end of the plot. Research shows that the first few presidents tended to give short speeches since they were personally delivered (spoken rather than delivered as a written report). Thomas Jefferson started a tradition of writing down the speech in the 19th century until personal delivery was revived by Woodrow Wilson. This accounts for the increase in average word count for presidents after Thomas Jefferson and a sudden decrease for Woodrow Wilson and subsequent presidents.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J5tPsZJuhU"}],"key":"py5baMwY9r"}],"key":"cWd1BX0BZJ"}],"key":"LuK1SLlSEG"},"references":{"cite":{"order":[],"data":{}}}}